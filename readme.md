# Arcane Art 

这是一个为了参加 TeaCon 2020 模组开发大赛而制作的 mod

## MP 系统

玩家有 MP 槽，释放法术消耗 MP。



### 魔法等级

消耗 MP 可以增长魔法经验，当经验积累至一定程度时，会弹出对话：“你感受到了天地间的灵气，对魔法产生了更深的理解”，同时增加玩家的魔法等级和 MP 上限。玩家的魔法等级有上限。



### MP 回复

当玩家在5s内没有收到伤害，且没有使用任何魔法，而且玩家饥饿值 > 6时，玩家将消耗饱食度和饥饿值自动回复 MP 值。兑换比例为 0.01饥饿 = 1% 最大 MP 值，回复速度为 3% MP/s。

玩家可以通过引用药剂暂时地增加 MP 上限、不被打断地回复魔法，或直接增加 MP 值。



### 死亡惩罚

当玩家复活时，玩家的 MP 上限和魔法等级不变，但 MP 重置为 最大 MP 值的 25%。



### 护甲惩罚

由于护甲会阻碍玩家体内魔法的流动，玩家穿着的护甲会增加玩家施法的消耗。护甲对魔法的阻碍能力和其材质的附魔亲和性负相关：更小的附魔亲和性会带来更大的额外消耗。

玩家身上所穿护甲的总亲和性由下列公式计算（以最大耐久做权的加权平均数）：
$$
总亲和性=\frac{\sum_{对每件护甲求和} 护甲最大耐久 \times 护甲附魔亲和性}{\sum_{对每件护甲求和} 护甲最大耐久}
$$

- 如果总亲和性 = 15，那么盔甲不会造成任何额外消耗
- 如果总亲和性 < 15 ，那么盔甲会增加法术的 MP 消耗
- 如果总亲和性 > 15 ，那么盔甲甚至会减少法术消耗



## 法术

可自由撰写的法术是本 mod 的核心内容，法术可以以咒语的形式储存在**书与笔**和**成书**之中。当然，法术也可以被刻录在法杖上和卷轴上储存。



### 学习法术

玩家可以通过打开自己的法术列表 GUI 学习或者遗忘法术。

学习一个法术时，将记载咒语的**成书**放入学习栏，如果所记载的内容是一段符合规范的咒语，那么书籍中的咒语将被添加到玩家的法术列表中，成书也会被返还。

忘记法术时，需要按下删除按钮进入忘记法术模式，然后双击法术进行删除。



### 使用法术

一共有 5 种使用法术的方式：手套释放、法杖释放、法杖自动释放、卷轴释放、仪式施法。



#### 手套释放

手持**法术手套**潜行右击，即可唤出手套快捷栏 GUI，在这里，玩家可以将已经学会的最多 9 个法术绑定到手套快捷栏上。

退出 GUI 后，玩家可以手持手套按住 Z 键使用滚轮或数字键调整要使用的法术。

在玩家的 MP 可以完成法术时，手持手套按住右键即可使用手套中当前的法术。

法术手套只用于施法以及绑定快捷栏，因此无法通过法术手套让玩家使用其他玩家的法术。



#### 法杖释放

利用仪式，可以将记录于**成书**中的法术刻录至法杖中。法杖内部也可存储大量的 MP 值，在使用法杖施法时，玩家只需要付出该法术 10% 的自身 MP，以及该法术 90% 的法杖内 MP 完成施法。



#### 魔法植物自动释放

魔法植物种子由仪式合成并刻录法术，可以种植于魔法花盆中。长成后，魔法植物即可自动释放法术。

魔法花盆会影响魔法植物释放法术的逻辑：

- 魔法花盆：收到红石上升沿信号时，释放一次魔法
- 循环花盆：有红石信号时，循环释放魔法，否则不释放魔法
- 反相循环花盆：无红石信号时，循环释放魔法，否则不释放魔法

魔法花盆分两个方块，下方方块是花盆，打破可以获得盛有植株的花盆；上方方块是植株，打破之后可以获得 1-2 个魔法种子和 2-3 片魔法叶子。

#### 卷轴释放

利用仪式，可以将记录于**成书**中的法术刻录至法杖中。在使用卷轴施法时，不消耗玩家 MP，也不需要蓄力即可使用其中的法术。

卷轴属于一次性物品，使用后即消失。



#### 仪式施法

通过仪式，可以执行一些 mod 内置的强力法术，例如大范围爱情魔法、改变天气、快速成熟、驱逐亡灵等。同时，有些物品也需要通过仪式制作，例如魔法水晶、法杖和卷轴。法杖也可以通过仪式为其注魔。



#### 魔法植物

使用仪式，可以将法术核心融合至植物，



### 编写法术

你可以使用原版的书与笔撰写法术。法术的词汇均源于拉丁文（后续可以加入藏语、希伯来语、梵语、古汉语、鲁尼文等小众或古老的语言，但所用字符必须在 UTF-8 字符集中）。



## 魔法物品

魔法物品是必须使用仪式制作的物品，有些物品也可以在村民中的魔导师那里购买。



### 魔法水晶

魔法水晶可以通过仪式制成，可以用于存储 MP、收集 MP、为世界中的法杖供应 MP。不同功能的水晶制作方法也不一样。水晶也偶尔会生成在世界中。



#### 收集型水晶

收集型水晶可以从生物群系中收集 MP。

这种水晶又可分为：

- 炎阳水晶：适应炎热的群系，温度越高效率越高
- 寒冰水晶：适应寒冷的群系，温度越低效率越高
- 繁荣水晶：适应温和、茂密、海洋群系
- 奇异水晶：适应稀有的群系，群系稀有度越高效率越高（[视频](https://www.bilibili.com/video/BV17A411b7o8)中频率 <= 0.04% 的群系）
- 熔岩水晶：汲取岩浆的热量，不必见到天空也能收集 MP 的水晶，需要下方有 9x9 的岩浆
- 虚空水晶：只能在末地工作的水晶，其下表面必须有一块黑曜石才会工作，周围的生物会减慢其工作效率

不同类型的收集型水晶在不同生物群系中的效率不同。除熔岩水晶外，收集 MP 时，水晶必须可以见到天空。

水晶每游戏刻依次检查平面内 9x9 范围内的方块，如果无法见到天空（熔岩水晶是检查下方平面是否存在岩浆源方块），或者存在其他收集水晶，那么该水晶在本次循环中不会继续产出 MP。

#### 透镜

透镜可以用来传输 MP 。从收集型水晶收集能量时，透镜必须紧挨水晶放置。透镜每隔一段时间就会将自身所储存 MP 以能量束的方式传输出去。能量束在无损传输 64 格后，将以原能量束 5%/格 的速度衰减。

透镜也可以用仪式升级，以增加发送频率、内部缓存大小以及无损传输距离。

透镜升级：

- 传送：损耗 30% 的 MP，将 MP 直接发送至另一个透镜

- 高频：增加发射频率至 1.3倍，但无损距离减少 50%

- 缓存腔：增加缓存 30%， 但无损距离减少 50%

- 持久：无损距离增加 50%，但缓存减少 30%

  

### 水晶碎片

储能水晶可以被裂解为水晶碎片，可以用于炼制 MP 药水。

- 水肺药水 + 水晶碎片 -> 魔法强化药水（暂时增加 MP 上限）
- 再生药水 + 水晶碎片 -> 魔法再生药水（提供不会被打断的 MP 回复）
- 瞬间回复药水 + 水晶碎片 -> 魔法瞬间回复药水
- + 水瓶 + 水晶碎片 -> 抗魔药水
- 魔法强化药水 + 发酵蜘蛛眼 -> 魔法弱化药水（暂时减少 MP 上限）
- 剧毒药水 + 水晶碎片 -> 魔法回复抑制药水（减慢魔法回复速度）
- 瞬间伤害药水 + 水晶碎片 -> 魔法吸收药水
- 抗魔药水 + 发酵蜘蛛眼 -> 魔抗弱化药水
- 虚弱药水 + 水晶碎片 -> 魔抗弱化药水

### 法术核心

用于制作法杖和魔法种子，需要用仪式制作并刻录法术



### 法杖和卷轴

法杖和卷轴可以由玩家执行仪式进行制作，也可以从村民那里买到。

