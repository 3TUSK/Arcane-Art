# 法术模块

本文重点介绍 MP、法术等基本的概念和使用方法

## MP

玩家有 MP 槽，释放法术消耗 MP。



### 魔法等级

消耗 MP 可以增长魔法经验，当经验积累至一定程度时，会弹出对话：“你感受到了天地间的灵气，对魔法产生了更深的理解”，同时增加玩家的魔法等级和 MP 上限。玩家的魔法等级有上限。



### MP 回复

当玩家在5s内没有收到伤害，且没有使用任何魔法，而且玩家饥饿值 > 6时，玩家将消耗饱食度和饥饿值自动回复 MP 值。兑换比例为 0.01饥饿 = 1% 最大 MP 值，回复速度为 3% MP/s。

玩家可以通过引用药剂暂时地增加 MP 上限、不被打断地回复魔法，或直接增加 MP 值。



### 死亡惩罚

当玩家复活时，玩家的 MP 上限和魔法等级不变，但 MP 重置为 最大 MP 值的 25%。



### 护甲惩罚

由于护甲会阻碍玩家体内魔法的流动，玩家穿着的护甲会增加玩家施法的消耗。护甲对魔法的阻碍能力和其材质的附魔亲和性负相关：更小的附魔亲和性会带来更大的额外消耗。

玩家身上所穿护甲的总亲和性由下列公式计算（以最大耐久做权的加权平均数）：
$$
总亲和性=\frac{\sum_{对每件护甲求和} 护甲最大耐久 \times 护甲附魔亲和性}{\sum_{对每件护甲求和} 护甲最大耐久}
$$

- 如果总亲和性 = 15，那么盔甲不会造成任何额外消耗
- 如果总亲和性 < 15 ，那么盔甲会增加法术的 MP 消耗
- 如果总亲和性 > 15 ，那么盔甲甚至会减少法术消耗

## 法术

可自由撰写的法术是本 mod 的核心内容，法术可以以咒语的形式储存在**书与笔**和**成书**之中。当然，法术也可以被刻录在法杖上和卷轴上储存。

### 获得法术书

玩家可以通过书与笔自己编写一个法术，编写完成后得到的成书即为法术书。

或者，玩家可以从世界中生成的箱子里获取由古人写好的法术书。

如果这些都觉得不方便的话，你还可以从魔导师村民那里购买他所写的法术书，当然，就不可能是原本了。

### 学习法术

玩家可以通过打开自己的法术列表 GUI 学习或者遗忘法术。

学习一个法术时，将记载咒语的**成书**放入学习栏，如果所记载的内容是一段符合规范的咒语，那么书籍中的咒语将被添加到玩家的法术列表中，成书也会被返还。

忘记法术时，需要按下删除按钮进入忘记法术模式，然后双击法术进行删除。



### 使用法术

一共有 5 种使用法术的方式：手套释放、法杖释放、法杖自动释放、卷轴释放、仪式施法。



#### 手套释放

手持**法术手套**潜行右击，即可唤出手套快捷栏 GUI，在这里，玩家可以将已经学会的最多 9 个法术绑定到手套快捷栏上。

退出 GUI 后，玩家可以手持手套按住 Z 键使用滚轮或数字键调整要使用的法术。

在玩家的 MP 可以完成法术时，手持手套按住右键即可使用手套中当前的法术。

法术手套只用于施法以及绑定快捷栏，因此无法通过法术手套让玩家使用其他玩家的法术。



#### 法杖释放

利用仪式，可以将记录于**成书**中的法术刻录至法杖中。法杖内部也可存储大量的 MP 值，在使用法杖施法时，玩家只需要付出该法术 10% 的自身 MP，以及该法术 90% 的法杖内 MP 完成施法。



#### 魔法植物自动释放

魔法植物种子由仪式合成并刻录法术，可以种植于魔法花盆中。长成后，魔法植物即可自动释放法术。

魔法花盆会影响魔法植物释放法术的逻辑：

- 魔法花盆：收到红石上升沿信号时，释放一次魔法
- 循环花盆：有红石信号时，循环释放魔法，否则不释放魔法
- 反相循环花盆：无红石信号时，循环释放魔法，否则不释放魔法

魔法花盆分两个方块，下方方块是花盆，打破可以获得盛有植株的花盆；上方方块是植株，打破之后可以获得 1-2 个魔法种子和 2-3 片魔法叶子。

#### 卷轴释放

利用仪式，可以将记录于**成书**中的法术刻录至法杖中。在使用卷轴施法时，不消耗玩家 MP，也不需要蓄力即可使用其中的法术。

卷轴属于一次性物品，使用后即消失。



#### 仪式施法

通过仪式，可以执行一些 mod 内置的强力法术，例如大范围爱情魔法、改变天气、快速成熟、驱逐亡灵等。同时，有些物品也需要通过仪式制作，例如魔法水晶、法杖和卷轴。法杖也可以通过仪式为其注魔。

### 编写法术

关于如何编写法术，请参考[编写法术]()章节。